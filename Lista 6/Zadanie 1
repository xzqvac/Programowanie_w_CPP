#include <iostream>
#include <cmath>

class Fraction
{
    long long int gcd(long long int a, long long int b) { return b == 0 ? a : gcd(b, a % b); }
    long long int n, d;
public:
    Fraction(int n, int d = 1) : n(n / gcd(n, d)), d(d / gcd(n, d)) { }
    long long int num() const { return n; }
    long long int den() const { return d; }
    Fraction& operator*=(const Fraction& rhs)
    {
        long long int new_n = n * rhs.n / gcd(n * rhs.n, d * rhs.d);
        d = d * rhs.d / gcd(n * rhs.n, d * rhs.d);
        n = new_n;
        return *this;
    }

    Fraction& operator+=(const Fraction& rhs)
    {
        long long int new_n = (n * rhs.d + rhs.n * d);
        long long int new_d = d * rhs.d;
        n = new_n / gcd(new_n, new_d);
        d = new_d / gcd(new_n, new_d);
        return *this;
    }

    Fraction& operator-=(const Fraction& rhs)
    {
        long long int new_n = (n * rhs.d - rhs.n * d);
        long long int new_d = d * rhs.d;
        n = new_n / gcd(new_n, new_d);
        d = new_d / gcd(new_n, new_d);
        return *this;
    }

    Fraction& operator/=(const Fraction& rhs)
    {
        long long int new_n = n * rhs.d/gcd(n * rhs.d, d * rhs.n);
        n = new_n;
        d = d * rhs.n/ gcd(n * rhs.d, d * rhs.n);
        return *this;
    }

    double to_double() const
    {
        return (double)n / d;
    }
};
std::ostream& operator<<(std::ostream& out, const Fraction& f)
{
    return out << f.num() << '/' << f.den();
}
bool operator==(const Fraction& lhs, const Fraction& rhs)
{
    return lhs.num() == rhs.num() && lhs.den() == rhs.den();
}
bool operator!=(const Fraction& lhs, const Fraction& rhs)
{
    return !(lhs == rhs);
}
Fraction operator*(Fraction lhs, const Fraction& rhs)
{
    return lhs *= rhs;
}
Fraction operator+(Fraction lhs, const Fraction& rhs)
{
    return lhs += rhs;
}
Fraction operator-(Fraction lhs, const Fraction& rhs)
{
    return lhs -= rhs;
}
Fraction operator/(Fraction lhs, const Fraction& rhs)
{
    return lhs /= rhs;
}
void i()
{
    Fraction x(0);
    for (int i = 1; i <= 100; i++)
    {
        Fraction temp(1, i * (i + 1));
        x += temp;
        if (i<=5)
        {
            std::cout << "i  x = " << x << "\n";
        }
    }
}
void ii()
{
    Fraction x(0);
    for (int i = 1; i <= 20; i++)
    {

        Fraction temp(i%2 ? -1 : 1, i);
        x += temp;
        if (i <= 5)
        {
            std::cout << "ii  x = " << x << "\n";
        }
    }
}
void iii()
{
    Fraction x(0);
    for (int i = 1; i <= 15; i++)
    {
        Fraction temp(1,pow(2,i)*i);
        x += temp;
        if (i <= 5)
        {
            std::cout << "iii  x = " << x << "\n";
        }
    }
}
int main()
{
    Fraction f1(3, 8), f2(1, 2), f3(10, 2);
    std::cout<<f1.to_double()<<std::endl;
    std::cout<<f2.to_double()<<std::endl;
    std::cout << f1 << " * " << f2 << " = " << f1 * f2 << '\n'
        << f2 << " * " << f3 << " = " << f2 * f3 << '\n'
        << 2 << " * " << f1 << " = " << 2 * f1 << '\n'
        << f2 << " + " << f1 << " = " << f2+ f1 << '\n'
        << f2 << " - " << f3 << " = " << f2 - f3 << '\n'
        << f2 << " / " << f1 << " = " << f2 / f1 << '\n';
    i();
    ii();
    iii();
}
